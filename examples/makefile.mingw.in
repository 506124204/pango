TOP = ../..

include $(TOP)/build/win32/make.mingw

# Possibly override Pango version from build/win32/module.defs
PANGO_VER = @VERSION@

OPTIMIZE = -g -Wall

INCLUDES = -I .. -I .
DEFINES = 
DEPCFLAGS = $(GTK_CFLAGS) $(GLIB_CFLAGS) $(FREETYPE2_CFLAGS)

all : \
	../config.h \
	viewer-win32.exe \
	viewer-ft2.exe

../config.h : ../config.h.win32
	cp $< $@

viewer-win32.exe : viewer-win32.o
	$(CC) -o $@ $< $(OPTIMIZE) -L ../pango -lpango-$(PANGO_VER) -lpangowin32-$(PANGO_VER) $(GTK_LIBS) $(GLIB_LIBS) -gdi32

viewer-ft2.exe : viewer-ft2.o
	$(CC) -o $@ $< $(OPTIMIZE) -L ../pango -lpango-$(PANGO_VER) -lpangoft2-$(PANGO_VER) $(FREETYPE2_LIBS) $(GTK_LIBS) $(GLIB_LIBS)

# Hack to get an updated makefile.mingw automatically after updating
# makefile.mingw.in. Only for developer use.
makefile.mingw: makefile.mingw.in
	sed -e 's,@VER[S]ION@,@VERSION@,' <$< >$@
