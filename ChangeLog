2006-05-17  Behdad Esfahbod  <behdad@gnome.org>

	Bug 342079 – pangoatsui-private.h missing from release

	* pango/Makefile.am (libpangocairo_1_0_la_SOURCES):
	Include pangoatsui-private.h.

2006-05-15  Behdad Esfahbod  <behdad@gnome.org>

	* === Released 1.13.1 ===

	* configure.in: Version 1.13.1

	* NEWS: Updated.

2006-05-15  Richard Hult  <richard@imendio.com>

	Bug 322374 – Examples does not build on MacOS X

	* pango/Makefile.am (libpangocairo_1_0_la_LDFLAGS): Add the necessary
	frameworks to make this build with -no-undefined.

2006-05-13  Behdad Esfahbod  <behdad@gnome.org>

	* pango/pango-item.c (pango_item_split): Don't copy item before
	g_return_if_fail'ing it for NULL. (Coverity issue id=18509&runid=43)

2006-05-13  Behdad Esfahbod  <behdad@gnome.org>

	* pango/fonts.c (pango_font_face_list_sizes): Fix possible NULL
	dereference. (Coverity issues id=17770&runid=43)

2006-05-11  Behdad Esfahbod  <behdad@gnome.org>

	Bug 71033 – make size 0 fonts work

	* pango/fonts.c (pango_font_description_set_size): Update docs to note
	a size value of zero may have been set explicitly.

	* pango/pango-context.c (pango_context_load_font): Don't warn if font
	size if zero.

	* pango/pangoatsui-fontmap.c (pango_atsui_font_map_load_font):
	* pango/pangox-fontmap.c (pango_x_font_map_load_font): Don't return if
	size is zero (probably will fail with no fonts found.)

	* pango/pangoxft-fontmap.c (pango_xft_font_map_default_substitute): Xft
	chokes on size zero.  Reassing PIXEL_SIZE to 1.0 if it's zero.

2006-05-01  Behdad Esfahbod  <behdad@gnome.org>

	Bug 340229 – pango_font_description_from_string does not do bound
	checking

	* pango/fonts.c (pango_font_description_set_size),
	(pango_font_description_set_absolute_size), (parse_size):
	* pango/pango-markup.c (span_parse_func): Don't accept negative font
	sizes, and make sure sizes don't overflow.

2006-04-29  Behdad Esfahbod  <behdad@gnome.org>

	Bug 329483 – hinting hexbox in cairo backend doesn't handle absolute
	font size
	Bug 340040 – pangocairo hex box hinting falls apart with PS/PDF
	backends

	* configure.in: Require cairo >= 1.1.2.  Also pass -no-undefined on all
	systems.

	* pango/pangocairo-font.c (_pango_cairo_font_get_hex_box_info): Fix
	hexbox info to respect absolute sizes and no metrics hinting settings.

2006-04-29  Behdad Esfahbod  <behdad@gnome.org>

	Bug 329664 – Move gunichar_to_glyph cache from PangoCairoFcFont to
	PangoFcFont
	Patch from LingNing Zhang.

	* pango/pangocairo-fcfont.c (pango_cairo_fc_font_finalize),
	(pango_cairo_fc_font_glyph_extents_cache_init),
	(pango_cairo_fc_font_get_glyph_extents_cache_entry),
	(pango_cairo_fc_font_class_init), (pango_cairo_fc_font_init):
	* pango/pangofc-font.c (pango_fc_font_finalize),
	(pango_fc_font_real_get_glyph): Move gunichar->glyph cache to
	pangofc-font.c

2006-04-29  Behdad Esfahbod  <behdad@gnome.org>

	Bug 329547 – pango_layout_get_pixel_extents and
	pango_layout_get_pixel_size cause off-by-one metrics

	* docs/pango-sections.txt:
	* docs/tmpl/glyphs.sgml:
	* pango/pango-types.h: Define PANGO_PIXELS_FLOOR and PANGO_PIXELS_CEIL.

	* pango/pango-layout.c (pango_layout_get_pixel_extents),
	(pango_layout_get_pixel_size): Make sure logical rects are
	consistent and ink rects are inclusive.

2006-04-29  Behdad Esfahbod  <behdad@gnome.org>

	* docs/tmpl/atsui-fonts.sgml:
	* docs/tmpl/coverage-maps.sgml:
	* docs/tmpl/engines.sgml:
	* docs/tmpl/fonts.sgml:
	* docs/tmpl/freetype-fonts.sgml:
	* docs/tmpl/glyphs.sgml:
	* docs/tmpl/layout.sgml:
	* docs/tmpl/main.sgml:
	* docs/tmpl/modules.sgml:
	* docs/tmpl/opentype.sgml:
	* docs/tmpl/pango-engine-lang.sgml:
	* docs/tmpl/pango-engine-shape.sgml:
	* docs/tmpl/pango-renderer.sgml:
	* docs/tmpl/pangocairo.sgml:
	* docs/tmpl/pangofc-decoder.sgml:
	* docs/tmpl/pangofc-font.sgml:
	* docs/tmpl/pangofc-fontmap.sgml:
	* docs/tmpl/scripts.sgml:
	* docs/tmpl/tab-stops.sgml:
	* docs/tmpl/text-attributes.sgml:
	* docs/tmpl/utils.sgml:
	* docs/tmpl/win32-fonts.sgml:
	* docs/tmpl/x-fonts.sgml:
	* docs/tmpl/xft-fonts.sgml:
	* pango/modules.c:
	* pango/pango-coverage.c: Doc updates.

2006-04-29  Behdad Esfahbod  <behdad@gnome.org>

	Bug 337594 – pango_glyph_string_extents_range possible bug

	* pango/glyphstring.c (pango_glyph_string_extents_range): Add offset
	for first glyph too.

2006-04-29  Behdad Esfahbod  <behdad@gnome.org>

	Bug 333771 – Use gmodule-no-export-2.0 instead of gmodule-2.0 in
	pango-uninstalled.pc.in

	* pango-uninstalled.pc.in: Require gmodule-no-export-2.0, like
	pango.pc.in does.

2006-04-29  Behdad Esfahbod  <behdad@gnome.org>

	Bug 307196 – Unhinted fonts are measured incorrectly and drawing
	problems occur as a result

	* pango/pangofc-font.c (get_face_metrics),
	(pango_fc_font_get_raw_extents):
	* pango/pangoxft-font.c (_pango_xft_font_new): Rollback previous
	change that forced metrics hinting always on.

	* pango/pangocairo-fcfont.c (_pango_cairo_fc_font_new): Set fcfont
	metrics hinting based on cairo font options.

2006-04-28  Behdad Esfahbod  <behdad@gnome.org>

	Bug 339749 – pango_language_from_string issues
	Patch from Morten Welinder.

	* pango/pango-utils.c (lang_equal): Make the equal function symmetric.

2006-04-28  Behdad Esfahbod  <behdad@gnome.org>

	* pango/pangofc-font.c (get_face_metrics),
	(pango_fc_font_get_raw_extents): Don't use is_hinted.  Metrics are
	always hinted now.

	* pango/pangoxft-font.c (_pango_xft_font_new): Remove hack that forced
	is_hinted to TRUE.

2006-04-27  Behdad Esfahbod  <behdad@gnome.org>

	* pangocairo.pc.in, pangocairo-uninstalled.pc.in: Remove CAIRO_CFLAGS
	from Cflags, as we Require cairo already.

2006-04-27  Behdad Esfahbod  <behdad@gnome.org>

	* pango/pango-impl-utils.h:
	* pango/fonts.c (pango_font_get_glyph_extents),
	(pango_font_get_metrics), (pango_font_get_font_map):
	* pango/pangocairo-render.c (pango_cairo_show_glyph_string),
	(pango_cairo_glyph_string_path): Add more warning_history items and
	handle more font failures, to make sure that instead of crashing,
	gedit runs and draws empty boxes when pango.modules is not set
	properly.

2006-04-26  Behdad Esfahbod  <behdad@gnome.org>

	Bug 339747 – pango_font_metrics_get_approximate_digit_width docs

	* pango/fonts.c: Fix typo in docs.

2006-04-26  Behdad Esfahbod  <behdad@gnome.org>

	Bug 339749 – pango_language_from_string issues

	* pango/pango-utils.c (pango_language_from_string): Avoid lookup that
	we know fails...

2006-04-23  Behdad Esfahbod  <behdad@gnome.org>

	* === Released 1.13.0 ===

	* configure.in: Version 1.13.0

	* NEWS: Updated.

2006-04-14  Behdad Esfahbod  <behdad@gnome.org>

	* examples/HELLO.utf8: Add Sinhala. (patch from Harshula)

2006-04-14  Behdad Esfahbod  <behdad@gnome.org>

	Bug 338343 – Bad cast

	* pango/pango-layout.c (pango_layout_set_text): Fix cast.

2006-04-13  Behdad Esfahbod  <behdad@gnome.org>

	* pango/pangox.c (get_font_metrics_from_subfonts): Check for nullity
	somewhere else.

2006-04-12  Behdad Esfahbod  <behdad@gnome.org>

	* pango/opentype/harfbuzz-gpos.c: Fix loop variables. (coverity
	found bug.)

2006-04-11  Behdad Esfahbod  <behdad@gnome.org>

	Bug 337924 – cleanups for issues reported by various compilers
	Patch from Kjartan Maraas.

	* examples/viewer-x.c (update):
	* modules/arabic/arabic-fc.c (fallback_shape),
	(arabic_engine_shape):
	* modules/basic/basic-fc.c (fallback_shape), (basic_engine_shape):
	* modules/basic/basic-x.c:
	* modules/hangul/hangul-fc.c:
	* modules/hebrew/hebrew-fc.c (hebrew_engine_shape):
	* modules/indic/indic-fc.c:
	* modules/khmer/khmer-fc.c:
	* modules/syriac/syriac-fc.c:
	* modules/thai/thai-fc.c:
	* modules/tibetan/tibetan-fc.c:
	* pango/break.c:
	* pango/modules.c:
	* pango/opentype/ftglue.c (_hb_ftglue_face_goto_table):
	* pango/pango-attributes.c (pango_attr_list_filter):
	* pango/pango-engine.c:
	* pango/pango-fontset.c:
	* pango/pango-layout.c (pango_layout_set_text),
	(pango_layout_xy_to_index), (pango_layout_get_cursor_pos):
	* pango/pango-markup.c (text_handler):
	* pango/pango-utils.c (read_alias_file):
	* pango/pangocairo-fcfont.c (G_DEFINE_TYPE_WITH_CODE):
	* pango/pangocairo-fcfontmap.c (G_DEFINE_TYPE_WITH_CODE):
	* pango/pangocairo-font.c (_pango_cairo_font_get_hex_box_info):
	* pango/pangox-fontmap.c (pango_x_make_matching_xlfd):
	* tests/dump-boundaries.c (fail):
	Remove unused variables.  Remove excess semicolon after DEFINE_TYPE
	macros.

2006-04-10  Behdad Esfahbod  <behdad@gnome.org>

	* config.h.win32, examples/makefile.msc: Removed.  Have not been
	updated since Feb 2001.

2006-04-10  Behdad Esfahbod  <behdad@gnome.org>

	* pango/pango-layout.c: Fix broken changes I made :).

2006-04-10  Behdad Esfahbod  <behdad@gnome.org>

	Fix minor bugs reported by the Coverity scan report.

	* pango/opentype/harfbuzz-gdef.c (HB_GDEF_Build_ClassDefinition):
	* pango/opentype/harfbuzz-gpos.c (HB_GPOS_Query_Scripts),
	(HB_GPOS_Query_Languages), (HB_GPOS_Query_Features): Do not access
	structs before we check them for nullity.

	* pango/pango-layout.c (pango_layout_index_to_line),
	(pango_layout_index_to_line_and_extents),
	(pango_layout_index_to_pos): Check for invalid iterators outside the
	loop, so we don't crash.
	
	* pango/pango-layout.c (pango_layout_line_x_to_index): Set
	char_trailing instead of trailing in one of too many paths.  Should
	have been a typo.

	* pango/pangox.c (get_font_metrics_from_subfonts): Check for nullity
	somewhere.

2006-04-09  Tor Lillqvist  <tml@novell.com>

	* pango/pango-utils.c (pango_quantize_line_geometry): Fix typo in
	doc comment.

2006-04-09  Behdad Esfahbod  <behdad@gnome.org>

	Bug 337821 – invisible unicode chars are visible next to hebrew chars

	* modules/hebrew/hebrew-fc.c: Handle zero_width chars in fallback
	shaper too.

	* modules/hebrew/hebrew-shaper.c: Remove unused Unicode<->ISO8859
	tables.

2006-04-07  Behdad Esfahbod  <behdad@gnome.org>

	Incorrect text rendering when in x86 64-bit precision mode
	https://bugs.freedesktop.org/show_bug.cgi?id=5200

	* pango/pangocairo-fcfont.c:Round metrics when converting
	to Pango units.
	
2006-04-06  Behdad Esfahbod  <behdad@gnome.org>

	Bug 337502 – Win32 build fix
	Patch from Alexander Larsson.

	* pango/pangocairo-fontmap.c: Fix order of checking for freetype and
	win32 cairo backends to match the constructor.

	* pango/pangoft2.def: Add missing symbol

2006-04-06  Behdad Esfahbod  <behdad@gnome.org>

	* pango/opentype: Update from HarfBuzz.  Lars Knoll fixed all the
	warnings.

2006-04-04  Behdad Esfahbod  <behdad@gnome.org>

	* pango/pango-utils.c, pango/querymodules.c: Fix a few warnings.

2006-04-03  Behdad Esfahbod  <behdad@gnome.org>

	* pango/opentype/harfbuzz-impl.h: Make sure TTAG_GDEF and frineds are
	defined, needed for FreeType <= 2.1.7 (pointed by Tim Janik).

2006-04-03  Behdad Esfahbod  <behdad@gnome.org>

	Bug 337029 – pango/fonts.c: Illegal structure initialization

	* pango/fonts.c: Change NULL's to ""'s after previous change, and fix
	code to follow.

2006-03-31  Behdad Esfahbod  <behdad@gnome.org>

	* pango/fonts.c:
	* pango/pango-utils.c:
	* pango/pangox-fontmap.c:
	* pango/pangoft2.c (_pango_ft2_ft_strerror): Change char* to
	char[] in the ft error table, to avoid relocations.

2006-03-31  Behdad Esfahbod  <behdad@gnome.org>

	Part of Bug 336026 – Make fallback shaper in modules work
	Patch from Denis Jacquerye.

	* pango/pango-ot-buffer.c (pango_ot_buffer_output): Call
	pango_fc_font_kern_glyphs if GPOS not applied.

2006-03-31  Behdad Esfahbod  <behdad@gnome.org>

	Bug 334802 – Using plain integer as NULL pointer

	* pango/mapping.c (pango_glyph_string_x_to_index): Fix type assigining
	trailing instead of *trailing.

	* pango/pango-layout.c (pango_layout_line_new): Use NULL instead of 0.

2006-03-31  Behdad Esfahbod  <behdad@gnome.org>

	Convert pango/opentype to the new project called HarfBuzz.

	* pango/opentype/*: Restructured.

	* pango/pango-ot-*: Updated to use HarfBuzz symbol names.

2006-03-30  Behdad Esfahbod  <behdad@gnome.org>

	Bug 335840 – Typo in including Xft.

	* pangoxft-render.h: Define _XFT_NO_COMPAT_ instead of _XFT_NO_COMPAT.

2006-03-30  Behdad Esfahbod  <behdad@gnome.org>

	* pango/*.[ch]: Make #include syntax in sources and headers more
	consistent.  We are using the "..." syntax for all Pango headers
	in source files, and <...> syntax in all header files, except for
	including private headers, that we use "...".

2006-03-30  Behdad Esfahbod  <behdad@gnome.org>

	Hook up pango-utils.h into the documentation, as we are installing
	it anyway.  Move some internal stuff to pango-impl-utils.h and make
	source files include that instead.

2006-03-30  Tor Lillqvist  <tml@novell.com>

	Fix blurred underlines on Win32 (#332656):
	
	* pango/pango-utils.c (pango_quantize_line_geometry):
	New public function. Used to be the static quantize_position() in
	pangofc-font.c

	* pango/pango-utils.h: Declare it.

	* pango/pango.def: Here, too.

	* pango/pangofc-font.c (quantize_position): Remove.
	(get_face_metrics): Use pango_quantize_line_geometry() instead.

	* pango/pangocairo-win32font.c (create_metrics_for_context): Call
	pango_quantize_line_geometry() for underline and strikethrough
	geometries.

2006-03-25  Behdad Esfahbod  <behdad@gnome.org>

	* pango/opentype/ottest.c: Don't err on Table_Missing.

2006-03-13  Behdad Esfahbod  <behdad@gnome.org>

	Create pango-1-12 stable branch.

	* ChangeLog.pre-1-12: Created.

	* Makefile.am: Updated to dist above.

Local Variables:
coding: utf-8
End:
vim: encoding=utf-8:
