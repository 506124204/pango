2008-06-16  Behdad Esfahbod  <behdad@gnome.org>

	* === Released 1.21.3 ===

	* configure.in: Version 1.21.3

	* NEWS: Updated.

2008-06-16  Behdad Esfahbod  <behdad@gnome.org>

	Bug 538661 – Improve pango_cairo_context_update_context()

	* pango/pangocairo-context.c (_pango_cairo_update_context):
	Relayout only if merged options changed.

2008-06-09  Behdad Esfahbod  <behdad@gnome.org>

	Bug 536190 – Make pango_fc_font_map_clear_cache() public?

	* pango/pangofc-fontmap.c:
	* pango/pangofc-fontmap.h:
	Make pango_fc_font_map_clear_cache() public.

2008-06-09  Behdad Esfahbod  <behdad@gnome.org>

	Bug 537258 – Add a pango_language_to_string() function

	* docs/tmpl/text-attributes.sgml:
	* pango/pango-language.c (pango_language_to_string):
	* pango/pango-language.h:
	* pango/pango.def:
	Add a function implementation of pango_language_to_string().
	The macro is still available.  To be removed in a cycle or two from
	now. (bug #537466)

2008-06-09  Behdad Esfahbod  <behdad@gnome.org>

	Bug 537257 – pango_language_from_string(NULL) not happy

	* pango/pango-language.c (pango_language_from_string):
	Allow NULL.

2008-06-09  Behdad Esfahbod  <behdad@gnome.org>

	Bug 537186 – Make PangoFcFont pattern property readable

	* pango/pangofc-font.c (pango_fc_font_class_init),
	(pango_fc_font_get_property): Make it readable.

2008-06-02  Behdad Esfahbod  <behdad@gnome.org>

	* === Released 1.21.2 ===

	* configure.in: Version 1.21.2

	* NEWS: Updated.

2008-05-28  Behdad Esfahbod  <behdad@gnome.org>

	Bug 510299 – OpenType font variants are broken with ATSUI/Cairo

	* pango/fonts.c (field_matches), (find_field): Ignore dashes when
	matching fong description fields.

2008-05-28  Tor Lillqvist  <tml@novell.com>

	* pango/pangowin32-fontmap.c (synthesize_foreach)
	(_pango_win32_font_map_init): Rework face synthesis once
	again. Code is simpler now, and we don't needlessly synthesize
	bold weights for fonts that have a real semi-bold weight, like
	Lucida Sans. (The bold weight ended up looking like the semi-bold
	anyway.)
	(pango_win32_font_description_from_logfont)
	(pango_win32_font_description_from_logfontw): Recognize the
	semi-bold weight interval.

	Map words that indicate weight and slant in the font name into the
	corresponding Pango font description settings, and strip those
	words from the family name. This maps for instance the DejaVu
	Sans, DejaVu Sans Condensed and DejaVu Sans Light fonts into a
	single DejaVu Sans family with styles Ultra-Light, Condensed,
	Normal, Oblique Condensed, Oblique, Bold Condensed, Bold, Bold
	Oblique Condensed, and Bold Oblique, which is nice.

2008-05-27  Tor Lillqvist  <tml@novell.com>

	* pango/pangowin32-fontmap.c (pango_win32_family_list_faces):
	After the change to how the standard pseudo font families are set
	up below, we don't need to prune out duplicate face names any
	longer.

2008-05-27  Tor Lillqvist  <tml@novell.com>

	Bug 436363 - Bold and Bold Italic style of MS-Mincho font are not
	listed in GtkFontSelection

	* pango/pangowin32-fontmap.c: Synthesize also Bold and Bold Italic
	(or Oblique) faces when feasible. Don't synthesize these for
	decorative or script fonts. Kill the magic code snippet mentioned
	below. Instead, explicitly create font families for the standard
	pseudo fonts that correspond to the first existing font of the
	corresponding built-in alias list. Use the face style name Oblique
	for slanted sans and monospace fonts, not Italic.

2008-05-27  Tor Lillqvist  <tml@novell.com>

	* pango/pangowin32-fontmap.c (pango_win32_family_list_faces):
	Prune duplicated face names. Makes the GTK+ font selector look a
	bit saner for the "sans", "serif" and "monospace" standard pseudo
	font families with just one instance of each style.

	That we get duplicated styles in the first place is because of the
	magic code snippet in pango_win32_insert_font() that sets up the
	list of faces for the standard pseudo font families. I don't like
	that code but without it these families wouldn't currently show up
	in the font selector at all.

	A problem is still that the magic code blindly adds all random
	fonts that claim to be FF_ROMAN to the list of faces for the
	"serif" family, etc. I think it would be preferrable to do it only
	for well-known sensible fonts. That would be those that are listed
	in builtin_aliases in pango-utils.c, I guess.

2008-05-26  Tor Lillqvist  <tml@novell.com>

	* pango/pangowin32-private.h
	* pango/pangowin32-fontmap.c: Drop the PangoWin32FontMap::n_fonts
	field which wasn't really used for anything. Rename the field
	PangoWin32Family::font_entries to faces. Rename some local
	variables to be more consistently named.

2008-05-26  Tor Lillqvist  <tml@novell.com>

	* pango/pangowin32.c
	* pango/pangowin32-fontmap.c: Some whitespace cleanup. 

2008-05-26  Tor Lillqvist  <tml@novell.com>

	* pango/pangowin32-private.h
	* pango/pangowin32-fontmap.c: Drop the PangoWin32SizeInfo struct
	and the hash table mapping from the relevant part of a LOGFONTW
	struct to a list of PangoWin32SizeInfos in PangoWin32FontMap. It
	seems that each list was always of length one anyway, so instead
	just map directly to each such single list member, also a LOGFONTW
	struct. Actually I wonder whether this map is needed at all, will
	have to experiment.

2008-05-23  Tor Lillqvist  <tml@novell.com>

	* pango/pango-utils.c: Revert the addition of the alias
	"sansserif". The correct name is "sans-serif", and "sans" should
	also be accepted. If something uses "sansserif" it is wrong. (I
	saw it in some sample svg files in librsvg.)

2008-05-20  Tor Lillqvist  <tml@novell.com>

	* pango/pango-utils.c: Add alias "sansserif" to the builtin
	aliases on Win32. Same contents as "sans" and "sans-serif".

2008-05-20  Tor Lillqvist  <tml@novell.com>

	Bug 523193 – Vista Hebrew, CJK fonts to builtin win32 pango aliases

	Patch by Daniel Atallah.
	
	* pango/pango-utils.c: Add fonts from Vista to the builtin
	aliases. Also add Lucida Sans Unicode and Lucida Console.

2008-05-13  Behdad Esfahbod  <behdad@gnome.org>

	* === Released 1.21.1 ===

	* configure.in: Version 1.21.1

	* NEWS: Updated.

2008-05-03  Behdad Esfahbod  <behdad@gnome.org>

	Bug 531242 – Leak when calculating win32 font coverage
	Patch from Daniel Atallah

	* pango/pangowin32.c (pango_win32_font_calc_coverage): Plug leak.

2008-04-30  Behdad Esfahbod  <behdad@gnome.org>

	Bug 530757 – Docs build breaks because of hash sign in URL in <ulink...>

	* docs/tmpl/main.sgml: Make it build.

2008-04-30  Behdad Esfahbod  <behdad@gnome.org>

	Bug 530685 – Pango no longer using cairo as a backend as of pango 1.19.4

	* configure.in: Be more verbose about cairo font backends found.

2008-04-28  Behdad Esfahbod  <behdad@gnome.org>

	* pango-view/viewer-main.c (main): Wait for convert(1) to finish.
	Patch by Jamie Guinan.

2008-04-24  Behdad Esfahbod  <behdad@gnome.org>

	Part of Bug 97545 – Make pango_default_break follow Unicode TR #29

	* docs/tmpl/main.sgml:
	* pango/break.c (pango_default_break):
	* pango/pango-break.h:
	* tests/testboundaries_ucd.c (main):
	Add new PangoLogAttr member is_word_boundary, that implements UAX#29's
	Word Boundaries semantics.  Test fully passes for it.

2008-04-24  Behdad Esfahbod  <behdad@gnome.org>

	Part of Bug 97545 – Make pango_default_break follow Unicode TR #29
	Patch from Noah Levitt

	* tests/Makefile.am:
	* tests/runtests.sh.in:
	* tests/testboundaries_ucd.c (count_attrs), (parse_line),
	(attrs_equal), (make_test_string), (do_test), (main):
	Add test driver for UAX#14 and UAX#29 test data from Unicode Character
	Databse.  Just drop the following four files in pango/tests for it to
	use them:

		GraphemeBreakTest.txt
		LineBreakTest.txt
		SentenceBreakTest.txt
		WordBreakTest.txt

2008-04-24  Behdad Esfahbod  <behdad@gnome.org>

	Part of Bug 97545 – Make pango_default_break follow Unicode TR #29

	* pango/break.c (pango_default_break): Make Grapheme Boundary code
	exactly follow UAX#29 of Unicode 5.1.0

2008-04-24  Behdad Esfahbod  <behdad@gnome.org>

	* pango/break.c (pango_default_break): Update GraphemeBoundary to
	Unicode 5.1.0.  Pretty close now.  Passes the TR14 test.

2008-04-24  Behdad Esfahbod  <behdad@gnome.org>

	* pango/break.c (pango_default_break): Allow line break at the end of
	string.  UAX#14 rule LB3 says "Always break at the end of text."
	With this test, Pango passes the LineBreakTest.txt, sans the bug in
	the test file that I've already reported to unicoRe.

2008-04-21  Behdad Esfahbod  <behdad@gnome.org>

	* === Released 1.21.0 ===

	* configure.in: Version 1.21.0

	* NEWS: Updated.

2008-04-21  Behdad Esfahbod  <behdad@gnome.org>

	* ChangeLog.pre-1-20:
	* Makefile.am:
	Wrap ChangeLog.

2008-04-21  Behdad Esfahbod  <behdad@gnome.org>

	* docs/pango-docs.sgml:
	* docs/pango-sections.txt:
	* docs/tmpl/bidi.sgml:
	* docs/tmpl/main.sgml:
	* docs/tmpl/vertical.sgml:
	* pango/pango-bidi-type.c (pango_log2vis_get_embedding_levels),
	(pango_unichar_direction), (pango_get_mirror_char):
	* pango/pango-bidi-type.h:
	* pango/pango-types.h:
	* pango/pango-utils.c:
	Group bidi stuff together.  Add a section in the docs for them.

2008-04-21  Behdad Esfahbod  <behdad@gnome.org>

	Bug 515432 – Add function to get bidirectional character type of a
	unicode character
	Patch from Jürg Billeter

	* docs/pango-sections.txt:
	* docs/tmpl/layout.sgml:
	* docs/tmpl/main.sgml:
	* docs/tmpl/pangocairo.sgml:
	* pango/Makefile.am:
	* pango/pango-bidi-type.c (pango_bidi_type_for_unichar):
	* pango/pango-bidi-type.h:
	* pango/pango-types.h:
	* pango/pango-utils.c (pango_log2vis_get_embedding_levels),
	(pango_unichar_direction):
	* pango/pango.def:
	* pango/pango.h:
	New public API:

		enum PangoBidiType;
		pango_bidi_type_get_type()
		pango_bidi_type_for_unichar()

2008-04-21  Behdad Esfahbod  <behdad@gnome.org>

	Bug 517119 – Add pango_cairo_create_context()

	* docs/pango-sections.txt:
	* pango/pangocairo-context.c (pango_cairo_create_context),
	(pango_cairo_create_layout):
	* pango/pangocairo.def:
	* pango/pangocairo.h:
	New public API:

		pango_cairo_create_context()

2008-04-21  Behdad Esfahbod  <behdad@gnome.org>

	Bug 404416 – pango_layout_get_baseline or something

	* docs/pango-sections.txt:
	* pango/pango-layout.c (pango_layout_get_baseline):
	* pango/pango-layout.h:
	* pango/pango.def:
	New public API:

		pango_layout_get_baseline()

2008-04-21  Behdad Esfahbod  <behdad@gnome.org>

	Bug 474706 – cairo hexbox looks ugly

	* pango/pangocairo-font.c
	(_pango_cairo_font_private_get_hex_box_info):
	Tweak minifont size a bit.  Also propagate font options correctly.

2008-04-21  Behdad Esfahbod  <behdad@gnome.org>

	Bug 490669 – add some <span> attribute aliases

	* docs/pango_markup.sgml:
	* pango/pango-markup.c (span_parse_func):
	Add fgcolor, bgcolor, font, font_size, font_weight, font_variant, ...

2008-04-21  Behdad Esfahbod  <behdad@gnome.org>

	Bug 501334 – Make pango_cairo_[show_]*[_path]() functions preserve
	current point

	* pango/pangocairo-render.c (_pango_cairo_renderer_draw_box_glyph),
	(_pango_cairo_renderer_draw_unknown_glyph), (acquire_renderer),
	(release_renderer), (save_current_point), (restore_current_point),
	(_pango_cairo_do_glyph_string), (_pango_cairo_do_layout_line),
	(_pango_cairo_do_layout):
	Preserve current point around pango_cairo_* functions().

2008-04-21  Behdad Esfahbod  <behdad@gnome.org>

	* configure.in:
	* pango/pangocairo-atsui.h:
	* pango/pangocairo-atsuifont.c
	(pango_cairo_atsui_font_create_font_face):
	* pango/pangocairo-fontmap.c
	(pango_cairo_font_map_new_for_font_type):
	Require cairo >= 1.6.4.  Remove compat cruft that were added to
	support older cairo that had cairo-atsui instead of cairo-quartz-font.

2008-04-21  Behdad Esfahbod  <behdad@gnome.org>

	Bug 514617 – Add pango_cairo_font_map_set_default()

	* docs/pango-sections.txt:
	* docs/tmpl/pangocairo.sgml:
	* pango/pangocairo-fontmap.c (pango_cairo_font_map_get_default),
	(pango_cairo_font_map_set_default):
	* pango/pangocairo.def:
	* pango/pangocairo.h:
	New public API:

		pango_cairo_font_map_set_default()

2008-04-21  Behdad Esfahbod  <behdad@gnome.org>

	* docs/pango-docs.sgml: Add index of new API in 1.22.

2008-04-21  Behdad Esfahbod  <behdad@gnome.org>

	Bug 511183 – Add pango_attr_type_get_name()

	* docs/pango-sections.txt:
	* docs/tmpl/text-attributes.sgml:
	* pango/pango-attributes.c (pango_attr_type_register),
	(pango_attr_type_get_name):
	* pango/pango-attributes.h:
	* pango/pango.def:
	New public API:
	
		pango_attr_type_get_name()

2008-04-20  Behdad Esfahbod  <behdad@gnome.org>

	* pango/pango-ot-info.c (pango_ot_info_get_gdef),
	(pango_ot_info_get_gsub), (pango_ot_info_get_gpos):
	Write out HarfBuzz errors as hex.

2008-04-09  Behdad Esfahbod  <behdad@gnome.org>

	* === Released 1.20.2 ===

	* configure.in: Version 1.20.2

	* NEWS: Updated.

2008-04-09  Behdad Esfahbod  <behdad@gnome.org>

	* pango/pangocairo-atsui.h:
	* pango/pangocairo-atsuifont.c:
	Really fix build without cairo-atsui.

2008-04-08  Behdad Esfahbod  <behdad@gnome.org>

	* === Released 1.20.1 ===

	* configure.in: Version 1.20.1

	* NEWS: Updated.

2008-04-08  Behdad Esfahbod  <behdad@gnome.org>

	Bug 491553 – Update to Unicode 5.1.0

	* docs/tmpl/scripts.sgml:
	* pango/mini-fribidi/README:
	* pango/mini-fribidi/fribidi_tab_char_type_2.i:
	* pango/pango-script-lang-table.h:
	* pango/pango-script.h:
	Update to Unicode Character Databse 5.1.0.  This adds new entries to
	the PangoScript enum.  Requires glib >= 2.16.3 for the update Unicode
	data there, but not bumping the requirement in a stable point release.

2008-04-08  Behdad Esfahbod  <behdad@gnome.org>

	* configure.in:
	* pango/pangocairo-atsui.h:
	* pango/pangocairo-atsuifont.c:
	Try making our OS X stuff compile with latest cairo 1.5.x snapshots
	that renamed cairo-atsui to cairo-quartz-font.

2008-04-08  Behdad Esfahbod  <behdad@gnome.org>

	* configure.in: Fix check for Carbon/Carbon.h availability.  Oops!

2008-03-21  Behdad Esfahbod  <behdad@gnome.org>

	* pango/pango-layout.c (get_x_offset): When doing ALIGN_CENTER,
	round line offset to whole pixel if hinting.

2008-03-11  Richard Hult  <richard@imendio.com>

	* pango/pangocairo-atsuifont.c (_pango_cairo_atsui_font_new):
	Adapt the shear matrix for synthesized italic to work with cairo
	1.5.13+, where the quartz surface has been fixed for transformed
	text.

Local Variables:
coding: utf-8
End:
vim: encoding=utf-8:
