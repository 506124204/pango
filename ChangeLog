2006-09-25  Behdad Esfahbod  <behdad@gnome.org>

	Bug 357686 – pangocairo-font.c: illegal g_object_unref in
	pango_cairo_font_get_hex_box_info

	* pango/pangocairo-font.c (_pango_cairo_font_get_hex_box_info): Remove
	wrong g_object_unref (fontmap).

2006-09-15  Behdad Esfahbod  <behdad@gnome.org>

	* === Released 1.12.4 ===

	* configure.in: Version 1.12.4

	* NEWS: Updated.

2006-07-24  Behdad Esfahbod  <behdad@gnome.org>

	Bug 347073 – Allow empty GPOS table

	* pango/opentype/ftxopen.c (FT_Load_ScriptList): Don't
	err on empty GPOS/GSUB tables.

2006-07-17  Richard Hult  <richard@imendio.com>

	Bug 322374 – Examples does not build on MacOS X (merge from HEAD).

	* pango/Makefile.am (libpangocairo_1_0_la_LDFLAGS): Add the
	necessary frameworks to make this build with -no-undefined.

2006-07-17  Richard Hult  <richard@imendio.com>

	Bug 347021 – atsui crash when a matching font cannot be found.
	Patch from Brian Tarricone.

	* pango/pangoatsui-fontmap.c (pango_atsui_font_map_load_font):
	Bail out if best desc or best face isn't found.

2006-07-08  Behdad Esfahbod  <behdad@gnome.org>

	Bug 345274 – list of new symbols for each version is missing in docs
	Patch from Priit Laes

	* docs/pango-docs.sgml: Generate index of deprecated, and new symbols
	per version.

2006-07-07  Behdad Esfahbod  <behdad@gnome.org>

	Bug 344766 – Memory leak in get_ruleset() in modules/basic/basic-fc.c

	* pango/pango-ot-private.h: Rename PANGO_OT_IS_RULESET is
	PANGO_IS_OT_RULESET.

	* pango/pango-ot-ruleset.c (pango_ot_ruleset_finalize),
	(pango_ot_ruleset_new), (pango_ot_ruleset_add_feature),
	(pango_ot_ruleset_substitute), (pango_ot_ruleset_position):
	Use weak pointers to reference ruleset->info, to avoid circular
	dependency.

2006-06-06  Behdad Esfahbod  <behdad@gnome.org>

	Bug 343966 – pango Cygwin build fixes
	Patch from Cygwin Ports maintainer.

	* configure.in: Use -no-undefined on all systems. [already on HEAD]
	* tests/Makefile.am: Add $(EXEEXT) where appropriate.

2006-06-05  Hans Breuer  <hans@breuer.org>
	[merged from HEAD]
	* pango/pangowin32-fontmap.c(pango_win32_font_map_init) : synthesize
	some italic variants for fonts no having them already. This fixes
	bug #343796 and for the italic case also bug #110521.

	[merged from HEAD]
	* pango/pangocairo-win32font.c(compute_glyph_extents) : not only 
	handle PANGO_GLYPH_EMPTY but also PANGO_GLYPH_UNKNOWN_FLAG. 
	The latter is needed to have proper sizing of the "hex box" for 
	missing glyphs. It also stops cairo complaining about unknown glyphs.
	Fixes part of bug #343796.

2006-05-31  Behdad Esfahbod  <behdad@gnome.org>

	Bug 341138 – Using TTC font, Gtk2 programs begin to eating big memory
	and have many cpu usage.
	Patch from Yong Li.

	* pango/opentype/ftglue.c (ftglue_face_goto_table): TrueType table
	offsets are absolute, not relative.

2006-05-31  Behdad Esfahbod  <behdad@gnome.org>

	Bug 336153 – Mark to mark positioning (Lookup Type 6) isn't correct
	when using MarkAttchmentType
	Patch from Tin Myo Htet.

	* pango/opentype/ftxgpos.c (Lookup_MarkMarkPos): Ignore marks
	of non-matchin attachment type.

2006-05-30  Behdad Esfahbod  <behdad@gnome.org>

	Bug 125378 – Better underline thickness handling

	* pango/pango-layout.c (pango_layout_run_get_extents): Include
	underline in ink extents.

2006-05-26  Behdad Esfahbod  <behdad@gnome.org>

	* === Released 1.12.3 ===

	* configure.in: Version 1.12.3

	* NEWS: Updated.

2006-05-23  Tor Lillqvist  <tml@novell.com>

	* pango/fonts.c (find_field): Fix crash, don't dereference NULL.

2006-05-23  Tor Lillqvist  <tml@novell.com>

	* pango/pangowin32.c (pango_win32_font_describe): Call
	pango_font_description_set_absolute_size() instead of
	pango_font_description_set_size() as the PangoWin32Font::size is
	in pixels, not points. There has been several bugs opened around
	this issue, with more or less misleading guesses. See for instance
	#314114. Thanks to Behdad for finally noticing the real problem
	here.

2006-05-22  Behdad Esfahbod  <behdad@gnome.org>

	Bug 342525 – With PangoFc and PangoWin32, approximate digit width is
	not what it says

	* pango/pangocairo-win32font.c (max_glyph_width),
	(create_metrics_for_context): Use max digit width instead of average.

	Reverted the following changes:

	* pango/pangowin32.c (pango_win32_font_get_metrics): Calculate
	average digit width correctly, not as max of the digit
	widths. (#342525) Note that this code doesn't really get much used
	currently (instead the code in pangocairo-win32font.c is used),
	fixed only for completeness.
	(max_glpyh_with): Now unused, drop.

2006-05-22  Behdad Esfahbod  <behdad@gnome.org>

	Bug 339730 – Pango needlessly falls back away from a Type 1 font into
	a TTF font

	* pango/fonts.c (find_field): Fix strncmp usage.

2006-05-22  Behdad Esfahbod  <behdad@gnome.org>

	Bug 341922 – pango should handle more characters as zero width
	Patch from Roozbeh Pournader

	* pango/pango-utils.c (pango_is_zero_width): Handle the following too:

		U+00AD  SOFT HYPHEN
		U+034F  COMBINING GRAPHEME JOINER
		U+2060  WORD JOINER
		U+2061  FUNCTION APPLICATION
		U+2062  INVISIBLE TIMES
		U+2063  INVISIBLE SEPARATOR

2006-05-22  Tor Lillqvist  <tml@novell.com>

	* pango/pangowin32.c (pango_win32_font_get_metrics): Calculate
	average digit width correctly, not as max of the digit
	widths. (#342525) Note that this code doesn't really get much used
	currently (instead the code in pangocairo-win32font.c is used),
	fixed only for completeness.
	(max_glpyh_with): Now unused, drop.
	
2006-04-29  Behdad Esfahbod  <behdad@gnome.org>

	* docs/tmpl/atsui-fonts.sgml:
	* docs/tmpl/coverage-maps.sgml:
	* docs/tmpl/engines.sgml:
	* docs/tmpl/fonts.sgml:
	* docs/tmpl/freetype-fonts.sgml:
	* docs/tmpl/glyphs.sgml:
	* docs/tmpl/layout.sgml:
	* docs/tmpl/main.sgml:
	* docs/tmpl/modules.sgml:
	* docs/tmpl/opentype.sgml:
	* docs/tmpl/pango-engine-lang.sgml:
	* docs/tmpl/pango-engine-shape.sgml:
	* docs/tmpl/pango-renderer.sgml:
	* docs/tmpl/pangocairo.sgml:
	* docs/tmpl/pangofc-decoder.sgml:
	* docs/tmpl/pangofc-font.sgml:
	* docs/tmpl/pangofc-fontmap.sgml:
	* docs/tmpl/scripts.sgml:
	* docs/tmpl/tab-stops.sgml:
	* docs/tmpl/text-attributes.sgml:
	* docs/tmpl/win32-fonts.sgml:
	* docs/tmpl/x-fonts.sgml:
	* docs/tmpl/xft-fonts.sgml:
	* examples/Makefile.am:
	* pango/modules.c:
	* pango/pango-coverage.c: Update docs.

2006-04-29  Behdad Esfahbod  <behdad@gnome.org>

	* docs/tmpl/atsui-fonts.sgml:
	* docs/tmpl/coverage-maps.sgml:
	* docs/tmpl/engines.sgml:
	* docs/tmpl/fonts.sgml:
	* docs/tmpl/freetype-fonts.sgml:
	* docs/tmpl/glyphs.sgml:
	* docs/tmpl/layout.sgml:
	* docs/tmpl/main.sgml:
	* docs/tmpl/modules.sgml:
	* docs/tmpl/opentype.sgml:
	* docs/tmpl/pango-engine-lang.sgml:
	* docs/tmpl/pango-engine-shape.sgml:
	* docs/tmpl/pango-renderer.sgml:
	* docs/tmpl/pangocairo.sgml:
	* docs/tmpl/pangofc-decoder.sgml:
	* docs/tmpl/pangofc-font.sgml:
	* docs/tmpl/pangofc-fontmap.sgml:
	* docs/tmpl/scripts.sgml:
	* docs/tmpl/tab-stops.sgml:
	* docs/tmpl/text-attributes.sgml:
	* docs/tmpl/win32-fonts.sgml:
	* docs/tmpl/x-fonts.sgml:
	* docs/tmpl/xft-fonts.sgml:
	* examples/Makefile.am:
	* pango/modules.c:
	* pango/pango-coverage.c:

2006-04-29  Behdad Esfahbod  <behdad@gnome.org>

	Bug 337594 – pango_glyph_string_extents_range possible bug

	* pango/glyphstring.c (pango_glyph_string_extents_range): Add offset
	for first glyph too.

2006-04-29  Behdad Esfahbod  <behdad@gnome.org>

	Bug 307196 – Unhinted fonts are measured incorrectly and drawing
	problems occur as a result

	* pango/pangofc-font.c (get_face_metrics),
	(pango_fc_font_get_raw_extents):
	* pango/pangoxft-font.c (_pango_xft_font_new): Rollback previous
	change that forced metrics hinting always on.

	* pango/pangocairo-fcfont.c (_pango_cairo_fc_font_new): Set fcfont
	metrics hinting based on cairo font options.

2006-04-28  Behdad Esfahbod  <behdad@gnome.org>

	* pango/pangofc-font.c (get_face_metrics),
	(pango_fc_font_get_raw_extents): Don't use is_hinted.  Metrics are
	always hinted now.

	* pango/pangoxft-font.c (_pango_xft_font_new): Remove hack that forced
	is_hinted to TRUE.

2006-04-27  Behdad Esfahbod  <behdad@gnome.org>

	* pangocairo.pc.in, pangocairo-uninstalled.pc.in: Remove CAIRO_CFLAGS
	from Cflags, as we Require cairo already.

2006-04-27  Behdad Esfahbod  <behdad@gnome.org>

	* pango/pango-impl-utils.h:
	* pango/fonts.c (pango_font_get_glyph_extents),
	(pango_font_get_metrics), (pango_font_get_font_map):
	* pango/pangocairo-render.c (pango_cairo_show_glyph_string),
	(pango_cairo_glyph_string_path): Add more warning_history items and
	handle more font failures, to make sure that instead of crashing,
	gedit runs and draws empty boxes when pango.modules is not set
	properly.

2006-04-27  Behdad Esfahbod  <behdad@gnome.org>

	* === Released 1.12.2 ===

	* configure.in: Version 1.12.2

	* NEWS: Updated.

2006-04-12  Behdad Esfahbod  <behdad@gnome.org>

	* pango/opentype/ftxgpos.c: Fix loop variables. (coverity
	found bug.)

2006-04-09  Behdad Esfahbod  <behdad@gnome.org>

	Bug 337821 – invisible unicode chars are visible next to hebrew chars

	* modules/hebrew/hebrew-fc.c: Handle zero_width chars in fallback
	shaper too.

	* modules/hebrew/hebrew-shaper.c: Remove unused Unicode<->ISO8859
	tables.

2006-04-07  Behdad Esfahbod  <behdad@gnome.org>

	Incorrect text rendering when in x86 64-bit precision mode
	https://bugs.freedesktop.org/show_bug.cgi?id=5200

	* pango/pangocairo-fcfont.c:Round metrics when converting
	to Pango units.
	
2006-04-07  Behdad Esfahbod  <behdad@gnome.org>

	* === Released 1.12.1 ===

	* configure.in: Version 1.12.1

	* NEWS: Updated.

2006-04-06  Behdad Esfahbod  <behdad@gnome.org>

	Bug 337502 – Win32 build fix
	Patch from Alexander Larsson.

	* pango/pangocairo-fontmap.c: Fix order of checking for freetype and
	win32 cairo backends to match the constructor.

	* pango/pangoft2.def: Add missing symbol

2006-04-01  Tor Lillqvist  <tml@novell.com>

	Fix blurred underlines on Win32 (#332656):

	* pango/pangocairo-win32font.c (quantize_position): New function,
	copy from pangofc-font.c.
	(create_metrics_for_context): Call quantize_position() for
	underline and strikethrough position and thickness.
	
2006-03-31  Behdad Esfahbod  <behdad@gnome.org>

	Part of Bug 336026 – Make fallback shaper in modules work
	Patch from Denis Jacquerye.

	* pango/pango-ot-buffer.c (pango_ot_buffer_output): Call
	pango_fc_font_kern_glyphs if GPOS not applied.

2006-03-31  Behdad Esfahbod  <behdad@gnome.org>

	Bug 334802 – Using plain integer as NULL pointer

	* pango/mapping.c (pango_glyph_string_x_to_index): Fix type assigining
	trailing instead of *trailing.

	* pango/pango-layout.c (pango_layout_line_new): Use NULL instead of 0.

2006-03-13  Behdad Esfahbod  <behdad@gnome.org>

	Create pango-1-12 stable branch.

	* ChangeLog.pre-1-12: Created.

	* Makefile.am: Updated to dist above.

Local Variables:
coding: utf-8
End:
vim: encoding=utf-8:
