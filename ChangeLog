2005-11-03  Behdad Esfahbod  <behdad@gnome.org>

	* examples/pangoft2pgm.c, renderdemo.c, renderdemo.h: Added a --runs
	options, useful for profiling.  Misc cleanup, freeing memory. (from
	#170414)

2005-11-03  Behdad Esfahbod  <behdad@gnome.org>

	Patches from #170414.  Reviewed by Matthias Clasen.

	* pango/opentype/ftxgpos.c, pango/opentype/ftxgsub.c: Use call table
	to dispatch different lookup types.

	* pango/opentype/pango-ot-buffer.c, pango/opentype/pango-ot-ruleset.c:
	Small cleanup.

2005-10-02  Behdad Esfahbod  <behdad@gnome.org>

	* pango/pango-engine.h: Add const to gchar * members of structs.
	Shuts up gcc warnings. (#317676)

2005-09-09  Owen Taylor  <otaylor@redhat.com>

	* pango/pangocairo-render.c (pango_cairo_show_glyph_string): unset
	all part colors, since when drawing just a glyph string, 
	prepare_run() isn't called. (#315599, Choe Hwanjin)

	* pango/pango-renderer.c (pango_renderer_draw_layout_line): NULL
	out renderer->priv->line_state.

2005-09-25  Behdad Esfahbod  <behdad@gnome.org>

	* pango/mini-fribidi/fribidi_get_type.c: Removed.  Not needed since
	2003 or so!

2005-09-22  Tor Lillqvist  <tml@novell.com>

	* pango/pangocairo-win32font.c (_pango_cairo_win32_font_new): Move
	the calculation of dpi and size earlier. Use the size variable
	instad of isize when looking for a matching cached font. Isize was
	supposed to be the same as size anyway. (Actually it was the same
	only when LOGPIXELSY equalled 96 (which often is the default
	value), see below.)

	* pango/pangocairo-win32fontmap.c (pango_cairo_win32_font_map_init): 
	Set dpi to the LOGPIXELSY value instead of hardcoding 96.

	* pango/Makefile.am (libpangocairo_1_0_la_LIBADD): Need WIN32_LIBS
	now.

2005-09-14  Tor Lillqvist  <tml@novell.com>

	* pango/pangocairo-win32font.c: Use identical glyph extents
	cacheing as in pangocairo-fcfont.c. Huge performance improvement.

	* README.win32: Update.

2005-09-14  Tor Lillqvist  <tml@novell.com>

	* pango/pangocairo-win32font.c (struct _PangoCairoWin32Font): Have
	a list of metrics by language instead of just one metrics.

	(pango_cairo_win32_font_get_scaled_font): Use the name cwfont
	instead of cffont.

	(free_metrics_info, pango_cairo_win32_font_finalize): Free the
	metrics by language list.

	(create_metrics_for_context): New helper function. Approximate the
	character and digit widths correctly. (#314114)

	(pango_cairo_win32_font_get_metrics): Use the list of metrics by
	language. Call create_metrics_for_context() to measure metrics.
	
	(_pango_cairo_win32_font_new): Keep the PangoWin32Font objects in
	the PangoWin32Face::cached_fonts, like the pangowin32 backend
	does. 

	PangoWin32Face::cached_fonts isn't really a proper cache. It's a
	list with unbound length, one PangoWin32Font per size. Once there
	is cacheing in cairo this can be dropped presumably? What does the
	pangofc backend do? There are too many levels of cacheing going
	on: we have the stuff in pangowin32-fontcache.c (unused now with
	cairo), the PangoWin32FontMap::freed_fonts cache, and the
	PangoWin32::cached_fonts list.

	* pango/pangowin32-fontmap.c (pango_win32_fontmap_cache_remove,
	pango_win32_fontmap_cache_clear): Use GQueue API instead of
	manipulating pointers manually.

	* pango/pangowin32-private.h
	* pango/pangowin32.c: Move PangoWin32MetricsInfo to the private
	header file, as also pangocairo-win32font.c uses it.
	
2005-09-13  Tor Lillqvist  <tml@novell.com>

	* modules/basic/basic-win32.c: Drop unused font_cache variable and
	the call to pango_win32_font_map_for_display() used in its
	initialization, which caused an extra instance of
	PangoWin32FontMap to be created, and fonts enumerated an extra
	time.

2005-09-12  Jean Brefort  <jean.brefort@normalesup.org>

	* pango/pango-attributes.c: (pango_attr_list_splice): Fixed typo
	(#316054).

2005-09-11  Matthias Clasen  <mclasen@redhat.com>

	* pango/pangocairo-fontmap.c (free_context_info): Use g_free()
	to free g_new()-allocated data, otherwise the GLib memory profiler
	becomes very unhappy.

2005-09-05  Behdad Esfahbod  <pango@behdad.org>

	* pango/pango-layout.c (pango_layout_set_auto_dir): Fixed typo in 
	docs.

2005-08-29  Behdad Esfahbod  <pango@behdad.org>

	* pango/opentype/ottest.c, pango/opentype/disasm.c: Generate valid
	XML output.  Dump LookupFlag too.

2005-08-29  Behdad Esfahbod  <pango@behdad.org>

	* examples/cairoview.c: Set cairo font resolution.

	* tests/testboundaries.c: Remove unused Hangul Jamo macros.

2005-08-29  Behdad Esfahbod  <pango@behdad.org>

	* examples/HELLO.utf8: Add a few Arabic non-spacing marks to the
	example.  Put the line with Pango in Greek-Japanese back in.

2005-08-26  Behdad Esfahbod  <pango@behdad.org>

	* pango/break.c: Protect against future line-break type additions in
	glib Unicode module.

2005-08-25  Tor Lillqvist  <tml@novell.com>

	* pango/Makefile.am: Use pangocairo.def when linking libpangocairo
	on Windows, instead of relying on GNU ld auto-exporting all public
	symbols.

	* pango/pangocairo.def: Add missing entries. (#314420, Kazuki
	Iwamoto)

2005-08-24  Owen Taylor  <otaylor@redhat.com>

	* pango/pangocairo-render.c (draw_error_underline): convert
	from Pango units to doubles, fix some coordinate space problems
	that had previously been fixed in GTK+. (#313015, Luis Villa)
